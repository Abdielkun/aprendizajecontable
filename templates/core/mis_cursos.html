{% extends 'base.html' %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-12">
    <h1 class="text-3xl font-bold text-brand-blue mb-8">Mi Aula Virtual</h1>

    <!-- SUSCRIPCIÓN -->
    {% if mi_suscripcion %}
    <div class="bg-white rounded-xl shadow-lg border-l-8 border-brand-orange p-8 mb-12 flex flex-col md:flex-row gap-6 items-center">
        <div class="text-center md:w-1/4">
            <i class="fa-solid fa-crown text-6xl text-yellow-400 mb-2"></i>
            <p class="font-bold text-gray-700 uppercase">{{ mi_suscripcion.curso.titulo }}</p>
        </div>
        <div class="flex-grow">
            <h3 class="text-xl font-bold text-brand-blue mb-2">Membresía Activa</h3>
            <p class="text-gray-600 mb-4">Tienes acceso ilimitado a todos los cursos y certificaciones.</p>
            <div class="flex gap-4 items-center">
                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold">ACTIVO</span>
                <form method="POST" action="{% url 'cancelar_suscripcion' mi_suscripcion.id %}" onsubmit="return confirm('¿Seguro que deseas cancelar? Perderás acceso inmediato.');">
                    {% csrf_token %}
                    <button class="text-red-500 text-sm hover:underline font-bold">Cancelar Suscripción</button>
                </form>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- PENDIENTES -->
    {% if cursos_pendientes %}
    <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-12">
        <h2 class="font-bold text-yellow-800 mb-4 flex items-center"><i class="fa-solid fa-clock mr-2"></i> Pagos en Revisión</h2>
        <div class="grid md:grid-cols-3 gap-4">
            {% for item in cursos_pendientes %}
            <div class="bg-white p-4 rounded shadow flex gap-3 opacity-75">
                <img src="{{ item.curso.get_image }}" class="w-16 h-16 object-cover rounded">
                <div>
                    <p class="font-bold text-sm">{{ item.curso.titulo }}</p>
                    <span class="text-xs bg-yellow-200 px-2 rounded">Validando...</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- CURSOS ACTIVOS -->
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Mis Cursos Individuales</h2>
    {% if cursos_activos %}
        <div class="grid md:grid-cols-3 gap-6">
            {% for item in cursos_activos %}
            <div class="bg-white rounded-xl shadow hover:shadow-xl transition overflow-hidden">
                <img src="{{ item.curso.get_image }}" class="w-full h-40 object-cover">
                <div class="p-5">
                    <h3 class="font-bold text-brand-blue h-12 overflow-hidden mb-4">{{ item.curso.titulo }}</h3>
                    <button class="w-full bg-brand-blue text-white py-2 rounded hover:bg-blue-900">Ingresar</button>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-12 bg-white rounded border-dashed border-2 border-gray-300">
            <p class="text-gray-500">No tienes cursos individuales.</p>
        </div>
    {% endif %}
</div>
{% endblock %}